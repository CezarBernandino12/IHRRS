.referral-container {
    max-width: 60%;
    margin-left: 25%;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.referral-container {
  --ink:#0f2242; --muted:#667085; --line:#e6e9f2; --subtle:#f7f9fc;
  --brand:#27548A; --accent:#17B26A; --radius:14px; --shadow:0 6px 28px rgba(16,40,87,.08);
}

.referral-header .referral-heading{
  line-height: 1.25;
}

.referral-header .referral-heading .line-1{
  font-size: 16px;   /* Republic of the Philippines */
}

.referral-header .referral-heading .line-2{
  font-size: 26px;   /* Daet, Camarines Norte */
  letter-spacing: .2px;
  margin-top: 2px;
}

.referral-header .referral-heading .line-3{
  font-size: 13px;   /* Barangay 1 */
  margin-top: 2px;
}

/* Field groups */
.form-group {
    margin-bottom: 25px;
}

.form-group-title {
    font-weight: bold;
    color: #333;
    margin-bottom: 8px;
    font-size: 16px;
}

/* Two-column layout for name fields */
.name-fields {
    display: flex;
    gap: 20px;
}

.name-field {
    flex: 1;
}

/* Form field styling */
.field-container {
    margin-bottom: 20px;
}

.field-label {
    display: block;
    color: #666;
    font-size: 14px;
    margin-bottom: 5px;
}

input[type="text"], 
select,
textarea {
    width: 100%;
    padding: 8px 0;
    border: none;
    border-bottom: 1px solid #ddd;
    font-size: 16px;
    transition: border-color 0.3s;
    background-color: transparent;
}

input[type="text"]:focus,
select:focus,
textarea:focus {
    outline: none;
    border-bottom: 2px solid #4a90e2;
}

/* Address fields */
.address-fields {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.address-row {
    display: flex;
    gap: 20px;
}

.address-field {
    flex: 1;
}

/* Select dropdown styling */
select {
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 0 center;
    background-size: 16px;
    padding-right: 20px;
}

/* Patient information section */
.patient-info {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.patient-field {
    flex: 1;
    min-width: 200px;
}

/* Vital signs section */
.vitals {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.vital-field {
    flex: 1;
    min-width: 120px;
}

/* Chief complaints textarea */
.complaints-container textarea {
    min-height: 100px;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 10px;
}

/* Diagnosis and treatment sections */
.diagnosis-container,
.treatment-container {
    margin-top: 25px;
}

.diagnosis-container textarea,
.treatment-container textarea {
    min-height: 120px;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 10px;
}

/* Header styling */
/* ===== Letterhead ===== */
.referral-header{
  display: flex;
  flex-wrap: wrap;            
  align-items: center;
  justify-content: center;      
  gap: 12px;
  margin-bottom: 10px;
  padding: 6px 8px 0;
  text-align: center;
}

.referral-logo.left,
.referral-logo.right{
  order: 0;                     /* appear first (same row) */
  display: block;
  width: 86px;
  height: 86px;
  object-fit: contain;
}
.referral-heading{
  order: 1;                     /* after the two logos */
  flex: 0 0 100%;
  text-align: center;
}

/* optional: tighten the underline rule below the header */
.referral-rule{
  border:0; height:2px; margin:12px 0 16px;
  background:#d8dee9;
  box-shadow: inset 0 1px 0 rgba(0,0,0,.25), inset 0 -1px 0 rgba(255,255,255,.7);
}
@media print{ .referral-rule{ background:#000; box-shadow:none; } }

/* Tighten the card to suit the new header */
.referral-container{
  width:100%;
  max-width:900px;
  margin:24px auto;
  padding:24px 28px;
  background:#fff;
  border:1px solid #dde3ee;
  border-radius:10px;
  box-shadow: 0 2px 12px rgba(16,40,87,.06);
}

/* Section headings a bit heavier to match letterhead */
.form-group-title{
  font-weight: 700;
  color:#0f2242;
  font-size: 15.5px;
}

/* ===== Print (A4) ===== */
@media print{
  @page{ size:A4; margin:10mm; }
  html,body{ -webkit-print-color-adjust: exact; print-color-adjust: exact; }

  /* hide chrome */
  #sidebar, nav, .view-record-link, .referral-form-footer{ display:none !important; }

  .referral-container{
    margin:0; padding:10mm;
    border:none; box-shadow:none; max-width:100%;
    font-size: 11pt;
  }

  /* letterhead */
  .referral-header{
    grid-template-columns: 80px 1fr 80px;
    gap:10px; margin-bottom:6px; padding:0;
  }
  .referral-logo{ width:80px; height:80px; }
  .referral-heading .line-1,
  .referral-heading .line-2,
  .referral-heading .line-3{ font-size: 12pt; }
  .referral-heading .title{ font-size: 16pt; margin-top: 4px; }

  .referral-rule{ height:1px; background:#cfd8e3; margin:6px 0 10px; }

  /* space & page-fit */
  .form-group{ margin-bottom: 12px; }
  .field-container{ margin-bottom: 8px; }
  .name-fields, .patient-info, .vitals{ gap:8px; }
  .diagnosis-container, .treatment-container{ margin-top:8px; }
  .diagnosis-container textarea, .treatment-container textarea{ min-height:70px !important; }
  .complaints-container textarea{ min-height: 50px !important; }

  /* avoid awkward splits */
  .referral-header, .referral-rule,
  .complaints-container, .diagnosis-container, .treatment-container{
    page-break-inside: avoid;
  }
}
.referral-heading .title{
  margin:10px 0 0;
  font-weight:bold;
  font-size:22px;
  letter-spacing:.4px;
  text-transform:uppercase;
  color:#000;
}

/* solid black rule under the heading */
/* ===== Modern referral section styling (scoped) ===== */
.referral-container {
  --ink:#0f2242; --muted:#667085; --line:#e6e9f2; --subtle:#f7f9fc;
  --brand:#27548A; --accent:#17B26A; --radius:14px; --shadow:0 6px 28px rgba(16,40,87,.08);
}

/* Meta strip (Referral ID / Date) */
.referral-meta{
  display:flex; gap:12px; flex-wrap:wrap; margin:8px 0 18px;
}
.badge{
  display:inline-flex; align-items:center; gap:8px;
  background:var(--subtle); border:1px solid var(--line);
  padding:8px 12px; border-radius:999px; font-size:13px; color:#344054;
}
.badge i{ font-size:18px; opacity:.8; }

/* Section Cards */
.section-card{
  background:white; border:1px solid var(--line); border-radius:var(--radius);
  padding:16px 18px 18px; box-shadow:var(--shadow); margin-bottom:18px;
}

/* Section title */
.section-title{
  font-weight:700; color:var(--ink); font-size:15px; margin:2px 0 14px;
}

/* Two-column information grid */
.info-grid{
  display:grid; grid-template-columns: 1fr 1fr; gap:14px 24px;
}
.kv{ min-height:44px; }
.kv .label{
  display:block; font-size:12px; letter-spacing:.3px; text-transform:uppercase;
  color:#8a94a6; margin-bottom:6px;
}
.kv .value{
  color:#0b1733; font-size:16px; font-weight:600; line-height:1.4;
}

/* Vital signs: compact 4-up when space allows */
.vitals-grid{ grid-template-columns: repeat(4, minmax(160px,1fr)); }

/* Rich text containers */
.textbox{
  background:var(--subtle); border:1px dashed #d7deea;
  padding:12px 14px; border-radius:10px; min-height:64px; white-space:pre-wrap;
}

/* Doctor-only areas */
.lock-note{ font-style:italic; color:#6b7280; font-weight:500; }

/* Readonly textarea restyle */
.treatment-container textarea{
  width:100%; background:var(--subtle); border:1px dashed #d7deea;
  border-radius:10px; padding:12px 14px; font-size:14px; outline:none;
}

/* Signature line */
.signature{
  display:flex; align-items:center; gap:16px; margin-top:8px;
}
.signature .line{
  flex:1; border-bottom:2px dotted #c7cedd; height:32px;
}
.signature .name{
  min-width:180px; text-align:right; font-weight:600; color:#0b1733;
}

/* Meta spacing for the footer (keeps your current buttons) */
.referral-form-footer{ margin-top:22px; }

/* Responsive */
@media (max-width: 840px){
  .info-grid{ grid-template-columns: 1fr; }
  .vitals-grid{ grid-template-columns: repeat(2, 1fr); }
}

/* Print: flatten effects, tighter spacing */
@media print{
  .section-card{ box-shadow:none; border-color:#cfd8e3; }
  .badge{ background:#fff; }
  .treatment-container textarea{ background:#fff; }
}


/* Action buttons */
.referral-form-footer {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #eee;
}
/* Add this to your existing CSS file */

.back-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background-color: white;
    color: #2ecc71; /* Bright green color */
    border: 2px solid #2ecc71;
    border-radius: 50px;
    padding: 12px 40px;
    font-size: 18px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
    cursor: pointer;
    width: 200px;
    margin: 20px 0;
}

.back-button:hover {
    background-color: rgba(46, 204, 113, 0.1);
}

.back-button i {
    margin-right: 10px;
    font-size: 20px;
}

/* Update the styles for the existing buttons in the footer */
.referral-form-footer {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #eee;
}

.footer-btn {
    padding: 5px 20px;
    background-color: white;
    color: #27548A;
    border: 2px solid #27548A;
    border-radius: 50px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
}

.footer-btn:hover {
    background-color: rgba(46, 204, 113, 0.1);
}

#goBackBtn::before {
    content: "< ";
    margin-right: 5px;
    font-size: 18px;
}
.footer-btns {
    padding: 10px 18px;
    margin-left: 10px;
    background-color: #162e51;
    color: white;
    font-size: 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.footer-btns:hover {
    background-color: #15253d;
}

/* View record link */
.view-record-link {
    color: #4a90e2;
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    transition: color 0.3s;
}

.view-record-link:hover {
    color: #3a7bc8;
    text-decoration: underline;
}



/* Improved print styles for the referral form */
@media print {
    @page {
        size: A4;
        margin: 10mm; /* Reduced margins */
    }
    
    body * {
        visibility: hidden;
    }
    
    .referral-container, .referral-container * {
        visibility: visible;
    }
    
    .referral-container {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: 10px;
        box-shadow: none;
        border: none;
        font-size: 11pt; /* Slightly smaller font size */
    }

    /* Header adjustments */
    .header-info {
        margin-bottom: 15px;
        padding-bottom: 10px;
    }
    
    .header-info h3 {
        margin: 3px 0;
        font-size: 14pt;
    }
    
    /* Compress spacing */
    .form-group {
        margin-bottom: 15px;
    }
    
    .field-container {
        margin-bottom: 10px;
    }
    
    /* Make fields more compact */
    .name-fields, .patient-info, .vitals {
        gap: 10px;
    }
    
    /* Reduce space in text areas */
    .diagnosis-container, .treatment-container {
        margin-top: 15px;
    }
    
    /* Make chief complaints area shorter */
    .complaints-container textarea {
        min-height: 60px;
    }
    
    /* Make diagnosis and treatment areas shorter */
    .diagnosis-container textarea, 
    .treatment-container textarea {
        min-height: 80px;
    }
    
    /* Hide navigation elements */
    .view-record-link, .footer-btn, .referral-form-footer {
        display: none;
    }
    
    /* Adjust form spacing */
    .form-group-title {
        margin-bottom: 5px;
        font-size: 12pt;
    }
    
    /* Adjust field label spacing */
    .field-label {
        margin-bottom: 2px;
        font-size: 9pt;
    }
    
    /* Adjust field value spacing */
    .field-value {
        font-size: 11pt;
        line-height: 1.3;
    }
}

@media print{
  .referral-logo.right{ width:72px; height:72px; margin-bottom:4px; }
  .referral-heading .line-1{ font-size:12pt; }
  .referral-heading .line-2{ font-size:18pt; }
  .referral-heading .line-3{ font-size:11pt; }
  .referral-heading .title{ font-size:14pt; margin-top:6px; }
  .referral-rule{ height:2px; margin:6px 0 8px; background:#000; }
}
@media print{
  .referral-header .referral-heading .line-1{ font-size: 14pt; }
  .referral-header .referral-heading .line-2{ font-size: 18pt; }
  .referral-header .referral-heading .line-3{ font-size: 12pt; }
}    @media print {
            @page {
                size: A4;
                margin: 10mm; /* Reduced margins */
            }
            
            body * {
                visibility: hidden;
            }
            
            .referral-container, .referral-container * {
                visibility: visible;
            }
            
            .referral-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                max-width: 100%;
                margin: 0;
                padding: 10px;
                box-shadow: none;
                border: none;
                font-size: 11pt; /* Slightly smaller font size */
            }

            /* Header adjustments */
            .header-info {
                margin-bottom: 15px;
                padding-bottom: 10px;
            }
            
            .header-info h3 {
                margin: 3px 0;
                font-size: 14pt;
            }
            
            /* Compress spacing */
            .form-group {
                margin-bottom: 15px;
            }
            
            .field-container {
                margin-bottom: 10px;
            }
            
            /* Make fields more compact */
            .name-fields, .patient-info, .vitals {
                gap: 10px;
            }
            
            /* Reduce space in text areas */
            .diagnosis-container, .treatment-container {
                margin-top: 10px;
            }
            
            /* Make chief complaints area shorter */
            .complaints-container {
                min-height: 40px;
            }
            
            /* Make diagnosis and treatment areas shorter */
            .diagnosis-container, 
            .treatment-container {
                min-height: 40px;
            }
            
            /* Hide navigation elements */
            .view-record-link, .footer-btn, .referral-form-footer {
                display: none;
            }
            
            /* Adjust form spacing */
            .form-group-title {
                margin-bottom: 5px;
                font-size: 12pt;
            }
            
            /* Adjust field label spacing */
            .field-label {
                margin-bottom: 2px;
                font-size: 9pt;
            }
            
            /* Adjust field value spacing */
            .field-value {
                font-size: 11pt;
                line-height: 1.3;
            }

            /* Optimize page break and spacing */
            .complaints-container,
            .diagnosis-container,
            .treatment-container {
                page-break-inside: avoid;
            }

            /* Reduce the height for text containers */
            .treatment-container textarea {
                height: 60px !important;
                min-height: 60px !important;
            }

            /* Make the page fit better */
            textarea {
                height: auto !important;
                min-height: 40px !important;
            }
        }


        /* Reduce default size of treatment text area */
        .treatment-container textarea {
            min-height: 80px;
        }
/* ================================
   PRINT — FORCE 1×A4 (minimal)
   ================================ */
@media print{
  /* Page + base */
  @page { size: A4; margin: 6mm; } /* tight margins */
  html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

  /* Hide app chrome */
  #sidebar, nav, .referral-form-footer, .view-record-link { display:none !important; }

  /* Container: compact typography + minimal padding */
  .referral-container{
    max-width:100%; margin:0; padding:6mm;
    border:0; box-shadow:none; background:#fff;
    font-size:10.2pt; line-height:1.22; color:#0b1733;
    transform-origin: top left; /* for autoscale */
  }

  /* Header: smaller logos & titles */
  .referral-header{ margin-bottom:4.5mm; gap:4px; align-items:center; }
  .referral-logo{ width:44px; height:44px; }
  .referral-heading .line-1{ font-size:9.2pt; color:#6b7280; }
  .referral-heading .line-2{ font-size:11pt; font-weight:700; color:#0f2242; }
  .referral-heading .line-3{ font-size:9pt; color:#6b7280; }
  .referral-heading .title{ font-size:12pt; margin-top:2px; }
  .referral-rule{ height:1px; margin:3.5mm 0; background:#d7deea; border:0; }

  /* Meta row: tiny chips */
  .referral-meta{ display:flex; gap:6px; flex-wrap:wrap; margin:0 0 4mm; }
  .badge{ padding:2px 7px; font-size:9.6pt; border:1px solid #e2e7f1; border-radius:999px; background:#fff; }

  /* Sections: remove decoration; keep thin separators */
  .section-card{
    background:transparent; border:0; border-radius:0;
    padding:0; margin:0 0 4mm;
  }
  .section-title{
    margin:0 0 2.5mm; font-weight:700; font-size:10.8pt; color:#0f2242;
    padding-bottom:1.5mm; border-bottom:1px solid #e7ecf6;
  }

  /* Grids: very tight */
  .info-grid{ display:grid; grid-template-columns:1fr 1fr; gap:5px 12px; }
  .vitals-grid{ grid-template-columns:repeat(4,1fr); gap:5px 8px; }

  .kv .label{
    display:block; font-size:8.4pt; margin-bottom:1px; letter-spacing:.15px;
    color:#7a879a; text-transform:uppercase;
  }
  .kv .value{
    font-size:10.2pt; font-weight:600; line-height:1.18; overflow-wrap:anywhere;
  }

  /* Text boxes: plain, shallow */
  .textbox{
    background:#fff; border:1px solid #e3e8f4;
    border-radius:4px; padding:4px 6px; min-height:20px;
  }

  /* Clamp long free text to prevent overflow (still shows a few lines) */
  #complaints, .diagnosis-field{
    display:-webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 3; overflow:hidden;
  }

  /* Treatment box: short */
  .treatment-container textarea{
    width:100%; background:#fff; border:1px solid #e3e8f4;
    border-radius:4px; padding:4px 6px; min-height:24px; height:24px;
    font-size:10pt; outline:none;
  }

  /* Signature: thin line, small gap */
  .signature{ display:flex; align-items:center; gap:8px; margin-top:3.5mm; }
  .signature .line{ flex:1; border-bottom:1px dotted #c7cedd; height:14px; }
  .signature .name{ font-weight:700; font-size:10.2pt; min-width:150px; text-align:right; }

  /* Reduce generic gaps */
  .form-group{ margin-bottom:4mm !important; }
  .field-container{ margin-bottom:1.8mm !important; }

  /* Keep blocks together where it helps legibility */
  .referral-header, .referral-meta,
  .complaints-container, .diagnosis-container, .treatment-container { page-break-inside: avoid; }
}
